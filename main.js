let maxHP=100,currentHP=maxHP;const monster=document.getElementById("monster"),healthBar=document.getElementById("health"),hpText=document.getElementById("hp-text"),resetIcon=document.getElementById("reset-icon"),coinCount=document.getElementById("coin-count"),upgradeContainer=document.getElementById("upgrade-btn-container"),upgradeDamageBtn=document.getElementById("upgrade-damage-btn"),spritesContainer=document.querySelector(".sprites-container"),player=document.getElementById("player"),statsContainer=document.querySelector(".stats-container"),damageText=document.getElementById("damage-text"),coinText=document.getElementById("coin-text"),companionText=document.getElementById("companion-text"),armourContainer=document.getElementById("armour-btn-container"),helmetBtn=document.getElementById("upgrade-helmet-btn"),chestplateBtn=document.getElementById("upgrade-chestplate-btn"),bootsBtn=document.getElementById("upgrade-boots-btn"),helmetImg=document.getElementById("helmet"),chestplateImg=document.getElementById("chestplate"),bootsImg=document.getElementById("boots");let helmetIndex=1,chestplateIndex=1,bootsIndex=1,coins=0,addedCoins=10,upgradeCoinPrice=10,maxCoinUpgrade=0,attackInProgress=!1,upgradeDamagePrice=20,damage=10,upgradeCompanionPrice=1030,companionDamage=0,displayCompanionBtn="flex",upgradeHelmetPrice=250,upgradeChestplatePrice=450,upgradeBootsPrice=200,helmetImgContent=`(${upgradeHelmetPrice} coins)`,chestplateImgContent=`(${upgradeChestplatePrice} coins)`,bootsImgContent=`(${upgradeBootsPrice} coins)`,clickSound=new Audio("./audio/click_001.ogg"),errorSound=new Audio("./audio/error_001.ogg"),upgradeSound=new Audio("./audio/upgrade_001.ogg"),backgroundSound=new Audio("./audio/background.mp3");errorSound.volume=.5;let renderUpgrades=function e(){upgradeContainer.innerHTML=`
        <button id="upgrade-damage-btn" onclick="upgradeDamageButton()"> <img id="sword" src="./icon/tools/sword-Photoroom.png" alt=""> <b>(${upgradeDamagePrice} coins)</b></button>
        <button id="upgrade-coin-btn" onclick="upgradeCoinButton()"><span>max : ${maxCoinUpgrade}</span><img id="coin" src="./icon/tools/pouch-Photoroom.png" alt=""><b>(${upgradeCoinPrice} coins)</b></button>
        <button id="upgrade-pet-btn" style="display: ${displayCompanionBtn};" onclick="upgradeCompanionButton()"><img id="companion" src="./icon/tools/pet-Photoroom.png" alt=""><b>(${upgradeCompanionPrice} coins)</b></button>
    `},renderStats=function e(){statsContainer.innerHTML=`
      <p id="damage-text">Damage: <span id="damage">${damage}</span></p>
      <p id="coin-text">Added Coins: <span id="coin-multiplier">${addedCoins}</span></p>
      <p id="companion-text">Companion Damage: <span id="companion-level">${companionDamage}</span></p>
    `},renderArmourUpgrades=function e(){armourContainer.innerHTML=`
        <button id="upgrade-helmet-btn" onclick="upgradeHelmetButton()" > <img id="helmet" src="./icon/armour/helmets/helmet${helmetIndex}-Photoroom.png" alt=""> <b>${helmetImgContent}</b></button>
        <button id="upgrade-chestplate-btn" onclick="upgradeChestplateButton()" > <img id="chestplate" src="./icon/armour/chestplate/chestplate${chestplateIndex}-Photoroom.png" alt=""> <b>${chestplateImgContent}</b></button>
        <button id="upgrade-boots-btn" onclick="upgradeBootsButton()" > <img id="boots" src="./icon/armour/boots/boots${bootsIndex}-Photoroom.png" alt=""> <b>${bootsImgContent}</b></button>
    `};function upgradeDamageButton(){coins>=upgradeDamagePrice?(coins-=upgradeDamagePrice,damage+=5,updateCoinCount(),upgradeDamagePrice-Math.floor(1.36*upgradeDamagePrice)<10?upgradeDamagePrice+=15:upgradeDamagePrice+=Math.floor(1.45*upgradeDamagePrice),upgradeSound.currentTime=0,upgradeSound.play()):(errorSound.currentTime=0,errorSound.play()),renderUpgrades(),renderStats()}

function upgradeCoinButton(){maxCoinUpgrade<0?maxCoinUpgrade=0:maxCoinUpgrade>0&&coins>=upgradeCoinPrice?(coins-=upgradeCoinPrice,updateCoinCount(),addedCoins+=5,upgradeCoinPrice-Math.floor(1.36*upgradeCoinPrice)<10?upgradeCoinPrice+=15:upgradeCoinPrice+=Math.floor(1.4*upgradeCoinPrice),maxCoinUpgrade--,upgradeSound.currentTime=0,upgradeSound.play()):(errorSound.currentTime=0,errorSound.play()),renderStats(),renderUpgrades()}function upgradeCompanionButton(){coins>=upgradeCompanionPrice?(coins-=upgradeCompanionPrice,updateCoinCount(),DogImgElement.style.display="block",displayCompanionBtn="none",petBtn.disabled=!0,petBtn.style.cursor="not-allowed",petBtn.removeEventListener("click",upgradeCompanionButton),clearInterval(companionDamageTimer),companionDamageTimer=setInterval(()=>{dealCompanionDamage(companionDamage)},2e3),companionDamage=1e3,renderStats(),renderUpgrades(),upgradeSound.currentTime=0,upgradeSound.play()):(errorSound.currentTime=0,errorSound.play())}const monsterImages=["sprites/monsters/monster1-Photoroom.png","sprites/monsters/monster2-Photoroom.png","sprites/monsters/monster3-Photoroom.png","sprites/monsters/monster4-Photoroom.png","sprites/monsters/monster5-Photoroom.png","sprites/monsters/monster6-Photoroom.png","sprites/monsters/monster7-Photoroom.png","sprites/monsters/monster8-Photoroom.png","sprites/monsters/monster9-Photoroom.png","sprites/monsters/monster10-Photoroom.png","sprites/monsters/monster11-Photoroom.png","sprites/monsters/monster12-Photoroom.png","sprites/monsters/monster13-Photoroom.png","sprites/monsters/monster14-Photoroom.png","sprites/monsters/monster15-Photoroom.png","sprites/monsters/monster16-Photoroom.png",];let currentImageIndex=0;function shuffleMonsterImage(){currentImageIndex=(currentImageIndex+1)%monsterImages.length,monster.src=monsterImages[currentImageIndex],currentImageIndex%8==0&&(addedCoins+=10,renderStats()),updateCoinCount()}function updateHealth(){let o=currentHP/maxHP*100;healthBar.style.width=o+"%",hpText.textContent=`${currentHP} / ${maxHP}`}

function handleAttack(){currentHP>0&&((currentHP-=damage)<0&&(currentHP=0),updateHealth(),updatePlayerFrame()),0===currentHP&&nextMonster()}function nextMonster(){maxHP+=50,currentHP=maxHP,updateHealth(),shuffleMonsterImage(),incrementCoins(),++maxCoinUpgrade>10?maxCoinUpgrade=10:maxCoinUpgrade<0&&(maxCoinUpgrade=0),renderUpgrades()}function updateCoinCount(){coinCount.textContent=`${coins} coins`}function incrementCoins(){coins+=addedCoins,updateCoinCount()}currentHP>0&&(spritesContainer.addEventListener("click",()=>{handleAttack()}),document.addEventListener("keydown",o=>{"Space"!==o.code&&"Enter"!==o.code||o.repeat||attackInProgress||(attackInProgress=!0,handleAttack(),setTimeout(()=>{attackInProgress=!1},50))})),updateHealth(),resetIcon.addEventListener("click",()=>{currentHP=maxHP=100,currentImageIndex=0,monster.src=monsterImages[currentImageIndex],updateHealth(),coins=0,updateCoinCount()});const dogFrames=["./sprites/companion/frame1-Photoroom.png","./sprites/companion/frame2-Photoroom.png","./sprites/companion/frame3-Photoroom.png","./sprites/companion/frame4-Photoroom.png","./sprites/companion/frame5-Photoroom.png","./sprites/companion/frame6-Photoroom.png","./sprites/companion/frame7-Photoroom.png","./sprites/companion/frame8-Photoroom.png","./sprites/companion/frame9-Photoroom.png",];let currentDogFrame=0;const totalDogFrames=dogFrames.length,DogImgElement=document.getElementById("dogGif"),petBtn=document.getElementById("upgrade-pet-btn"),dogFrameDuration=100;function updateDogFrame(){currentDogFrame=0;let o=setInterval(()=>{DogImgElement.src=dogFrames[currentDogFrame],++currentDogFrame>=totalDogFrames&&(clearInterval(o),currentDogFrame=dogFrames.length)},100)}

let companionDamageTimer=setInterval(()=>{dealCompanionDamage(companionDamage)},2e3);function dealCompanionDamage(e){updateDogFrame(),currentHP>0&&((currentHP-=e)<0&&(currentHP=0),updateHealth()),0===currentHP&&nextMonster()}DogImgElement.style.display="none";const playerFrames=["./sprites/player/frame2-Photoroom.png","./sprites/player/frame3-Photoroom.png","./sprites/player/frame4-Photoroom.png","./sprites/player/frame5-Photoroom.png","./sprites/player/frame1-Photoroom.png",];let currentPlayerFrame=0;const totalPlayerFrames=playerFrames.length,playerFrameDuration=50,playerSwoosh=new Audio("./sprites/player/sword-swoosh (mp3cut.net).mp3");function updatePlayerFrame(){let e=setInterval(()=>{player.src=playerFrames[currentPlayerFrame],++currentPlayerFrame>=totalPlayerFrames&&(currentPlayerFrame=0,clearInterval(e))},50);playerSwoosh.currentTime=0,playerSwoosh.play()}function upgradeHelmetButton(){coins>=upgradeHelmetPrice?(coins-=upgradeHelmetPrice,updateCoinCount(),damage+=10,upgradeHelmetPrice-Math.floor(1.36*upgradeHelmetPrice)<10?upgradeHelmetPrice+=15:upgradeHelmetPrice+=Math.floor(1.45*upgradeHelmetPrice),helmetImgContent=`(${upgradeHelmetPrice} coins)`,shuffleHelmetImage(),renderArmourUpgrades(),renderStats(),upgradeSound.currentTime=0,upgradeSound.play()):(errorSound.currentTime=0,errorSound.play())}playerSwoosh.volume=.35;

function upgradeChestplateButton(){coins>=upgradeChestplatePrice?(coins-=upgradeChestplatePrice,updateCoinCount(),damage+=15,upgradeChestplatePrice-Math.floor(1.36*upgradeChestplatePrice)<10?upgradeChestplatePrice+=15:upgradeChestplatePrice+=Math.floor(1.45*upgradeChestplatePrice),chestplateImgContent=`(${upgradeChestplatePrice} coins)`,shuffleChestplateImage(),renderArmourUpgrades(),renderStats(),upgradeSound.currentTime=0,upgradeSound.play()):(errorSound.currentTime=0,errorSound.play())}function upgradeBootsButton(){coins>=upgradeBootsPrice?(coins-=upgradeBootsPrice,updateCoinCount(),damage+=5,upgradeBootsPrice-Math.floor(1.36*upgradeBootsPrice)<10?upgradeBootsPrice+=15:upgradeBootsPrice+=Math.floor(1.45*upgradeBootsPrice),bootsImgContent=`(${upgradeBootsPrice} coins)`,shuffleBootsImage(),renderArmourUpgrades(),renderStats(),upgradeSound.currentTime=0,upgradeSound.play()):(errorSound.currentTime=0,errorSound.play())}const helmetImages=["./sprites/armour/helmet1-Photoroom.png","./sprites/armour/helmet2-Photoroom.png","./sprites/armour/helmet3-Photoroom.png","./sprites/armour/helmet4-Photoroom.png","./sprites/armour/helmet5-Photoroom.png","./sprites/armour/helmet6-Photoroom.png","./sprites/armour/helmet7-Photoroom.png","./sprites/armour/helmet8-Photoroom.png","./sprites/armour/helmet9-Photoroom.png","./sprites/armour/helmet10-Photoroom.png",];function shuffleHelmetImage(){helmetIndex++,helmetImg.src=helmetImages[helmetIndex],helmetIndex===helmetImages.length&&(upgradeHelmetPrice=".",helmetImgContent="Maxed",helmetBtn.disabled=!0)}

const chestplateImages=["./sprites/armour/chestplate1-Photoroom.png","./sprites/armour/chestplate2-Photoroom.png","./sprites/armour/chestplate3-Photoroom.png","./sprites/armour/chestplate4-Photoroom.png","./sprites/armour/chestplate5-Photoroom.png","./sprites/armour/chestplate6-Photoroom.png","./sprites/armour/chestplate7-Photoroom.png","./sprites/armour/chestplate8-Photoroom.png","./sprites/armour/chestplate9-Photoroom.png","./sprites/armour/chestplate10-Photoroom.png",];function shuffleChestplateImage(){chestplateIndex++,chestplateImg.src=chestplateImages[chestplateIndex],chestplateIndex===chestplateImages.length&&(upgradeChestplatePrice=".",chestplateImgContent="Maxed",chestplateBtn.disabled=!0)}const bootsImages=["./sprites/armour/boots1-Photoroom.png","./sprites/armour/boots2-Photoroom.png","./sprites/armour/boots3-Photoroom.png","./sprites/armour/boots4-Photoroom.png","./sprites/armour/boots5-Photoroom.png","./sprites/armour/boots6-Photoroom.png","./sprites/armour/boots7-Photoroom.png","./sprites/armour/boots8-Photoroom.png","./sprites/armour/boots9-Photoroom.png","./sprites/armour/boots10-Photoroom.png",];function shuffleBootsImage(){bootsIndex++,bootsImg.src=bootsImages[bootsIndex],bootsIndex===bootsImages.length&&(upgradeBootsPrice=".",bootsImgContent="Maxed",chestplateBtn.disabled=!0)}document.addEventListener("click",o=>{spritesContainer.contains(o.target)||(clickSound.currentTime=0,clickSound.play())}),backgroundSound.loop=!0,backgroundSound.volume=.2,window.addEventListener("load",()=>{backgroundSound.play().catch(()=>{alert("Autoplay blocked. Waiting for user action...");let o=()=>{backgroundSound.play(),document.removeEventListener("click",o),document.removeEventListener("keydown",o)};document.addEventListener("click",o),document.addEventListener("keydown",o)})});
